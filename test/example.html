<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Control example</title>
    <style>

        .control {
            margin-bottom: 1em;
        }

        .control__input {
        }

        .control__error {
            color: red;
        }

    </style>
</head>
<body>

    <div class="control js-name-control">
        <label>
            Your name:
            <input class="control__input js-input" autofocus/>
        </label>
        <span class="control__error js-feedback-message"></span>
    </div>

    <div class="control js-gender-control">
        <label>
            Your gender:
            <div class="control__input js-input">
                <label><input type="radio" name="gender" class="js-option" value="male"/> Male</label>
                <label><input type="radio" name="gender" class="js-option" value="female"/> Female</label>
            </div>
        </label>
        <span class="control__error js-feedback-message"></span>
    </div>

    <div class="control js-colour-control">
        <label>
            Your favourite colour:
            <select class="control__input js-input">
                <option value="">Pick a colour...</option>
                <option value="red">Red</option>
                <option value="blue">Blue</option>
                <option value="green">Green</option>
            </select>
        </label>
        <span class="control__error js-feedback-message"></span>
    </div>

    <script src="../build/build.js"></script>
    <script>

        //trim whitespace from front and back
        var trim        = function(val) { return typeof val === 'string' ? val.replace(/^\s+/, '').replace(/\s+$/, '') : val; };
        var required    = function(val) { return typeof val === 'string' && val.length > 0; };

        //mock the model
        var model       = {
            set: function(name, value) {
                console.log('Model: prop='+name+' value="'+value+'"');
            }
        };

        var Control = require('control');

        var nameControl = Control.create({
            el:             document.querySelector('.js-name-control'),
            name:           'name',
            filters:        [trim],
            validators:     [[required, 'Your name is required so we can contact you.']],
            model:          model,
            modelProperty:  'name'
        });

        var genderControl = Control.create({
            el:             document.querySelector('.js-gender-control'),
            type:           'option',
            events:         ['blur', 'click'],
            name:           'gender',
            filters:        [trim],
            validators:     [[required, 'Your gender is required so you can claim things like pregnancy.']],
            model:          model,
            modelProperty:  'gender'
        });

        var colourControl = Control.create({
            el:             document.querySelector('.js-colour-control'),
            name:           'colour',
            filters:        [trim],
            validators:     [[required, 'Your favourite colour is required so we know more about you.']]
        });

        nameControl
            .on('change', function() {
                console.log('Control name='+nameControl.getName()+' changed');
            })
            .on('validate', function(valid, value, control) {
                console.log('Control name='+control.getName()+' valid='+valid, 'value="'+value+'"');
            })
        ;

        genderControl
            .on('change', function() {
                console.log('Control name='+genderControl.getName()+' changed');
            })
            .on('validate', function(valid, value, control) {
                console.log('Control name='+control.getName()+' valid='+valid, 'value="'+value+'"');
            })
        ;

    </script>
</body>
</html>